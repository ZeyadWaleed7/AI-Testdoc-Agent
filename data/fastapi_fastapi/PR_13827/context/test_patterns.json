{
  "tests/test_union_forms.py": {
    "content": "from typing import Union\n\nfrom fastapi import FastAPI, Form\nfrom fastapi.testclient import TestClient\nfrom pydantic import BaseModel\nfrom typing_extensions import Annotated\n\napp = FastAPI()\n\n\nclass UserForm(BaseModel):\n    name: str\n    email: str\n\n\nclass CompanyForm(BaseModel):\n    company_name: str\n    industry: str\n\n\n@app.post(\"/form-union/\")\ndef post_union_form(data: Annotated[Union[UserForm, CompanyForm], Form()]):\n    return {\"received\": data}\n\n\nclient = TestClient(app)\n\n\ndef test_post_user_form():\n    response = client.post(\n        \"/form-union/\", data={\"name\": \"John Doe\", \"email\": \"john@example.com\"}\n    )\n    assert response.status_code == 200, response.text\n    assert response.json() == {\n        \"received\": {\"name\": \"John Doe\", \"email\": \"john@example.com\"}\n    }\n\n\ndef test_post_company_form():\n    response = client.post(\n        \"/form-union/\", data={\"company_name\": \"Tech Corp\", \"industry\": \"Technology\"}\n    )\n    assert response.status_code == 200, response.text\n    assert response.json() == {\n        \"received\": {\"company_name\": \"Tech Corp\", \"industry\": \"Technology\"}\n    }\n\n\ndef test_invalid_form_data():\n    response = client.post(\n        \"/form-union/\",\n        data={\"name\": \"John\", \"company_name\": \"Tech Corp\"},\n    )\n    assert response.status_code == 422, response.text\n\n\ndef test_empty_form():\n    response = client.post(\"/form-union/\")\n    assert response.status_code == 422, response.text\n\n\ndef test_openapi_schema():\n    response = client.get(\"/openapi.json\")\n    assert response.status_code == 200, response.text\n\n    assert response.json() == {\n        \"openapi\": \"3.1.0\",\n        \"info\": {\"title\": \"FastAPI\", \"version\": \"0.1.0\"},\n        \"paths\": {\n            \"/form-union/\": {\n                \"post\": {\n                    \"summary\": \"Post Union Form\",\n                    \"operationId\": \"post_union_form_form_union__post\",\n                    \"requestBody\": {\n                        \"content\": {\n                            \"application/x-www-form-url",
    "language": "py"
  }
}